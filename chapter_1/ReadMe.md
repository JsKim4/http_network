# 인터넷 네트워크

## 목차
- 인터넷 통신
- IP(Internet Protocol)
- TCP, UDP
- PORT
- DNS

# 인터넷 통신
- 클라이언트와 서버가 바로 붙어있으면 바로 데이터 전송
- 인터넷망을 통해 메세지가 클라이언트에서 서버로 통하는 과정이 복잡함 ( 중간 노드를 거쳐 메세지가 발송됨 )
- 이런 메세지가 안전하게 발송되는것을 이해하기위해 IP에 대해 학습

# IP(Internet Protocol)
- 인터넷망을 통해 메세지를 전송하기 위한 최소한의 규칙을 IP를 통해 지정
- `IP 의 역할`
    - 지정한 IP 주소에 데이터 전달
    - 패킷(Packet) 이라는 통신 단위로 데이터 전달
- 전송데이터(메세지)에 `출발지 IP, 목적지IP` 등의 데이터를 감싸서 인터넷 망에 전송 `= IP 패킷`
- 전송받은 서버는 메세지를 응답받을 경우 클라이언트에게 `다시 전달`
- `IP 프로토콜의 한계`
    - `비연결성`
        - 패킷을 받을 대상이 없거나 불능 상태여도 패킷 전송
    - `비신뢰성`
        - 중간에 패킷이 유실될경우
        - 여러 패킷을 보냈을때 패킷의 순서가 맞지 않는 경우
    - `프로그램 구분`
        - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 여러개일 경우
- IP 의 문제를 해결하기 위해 TCP 사용

# TCP, UDP
- 인터넷 프로토콜 4 계층
    - 애플리케이션 계층 - HTTP,FTP
    - 전송 계층 - TCP, UDP
    - 인터넷 계층 - IP
    - 네트워크 인터페이스 계층

- 메세지 전송 순서
    1. 애플리케이션에서 메세지 생성
    2. OS 에 메세지 전달
    3. TCP 정보를 메세지에 씌움
    4. IP정보를 TCP 정보에 씌움
    5. 랜카드로 전달
- IP 패킷 내부, 메세지외부에 `출발지 PORT, 목적지 PORT, 전송 제어, 순서, 검증 정보`등이 들어가게됨 = `TCP 세그먼트`
- `TCP 특징`
    - 연결지향 - TCP 3 way handshake (가상연결)
    - 데이터 전달 보증 (패킷이 중간에 누락된경우 사용자가 알 수 있음)
    - 순서를 보장함
    - 신뢰할 수 있는 프로토콜

- `연결지향`
    1. 클라이언트 -> 서버로 SYN, 데이터 송신
    2. 서버에서 수신시 서버 -> 클라이언트 SYN+ACK 데이터 송신
    3. 클라이언트 -> 서버로 ACK  송신
    4. 서버 -> 클라이어트 데이터 송신
    - 최근엔 3,4번 동시에 이루어지기도함
- `데이터 전달 보증`
    1. 클라이언트 -> 서버 데이터 송신
    2. 서버 -> 클라이언트 데이터 정상 수신했다고 송신

- `순서 보장`
    1. 클라이언트 -> 서버 패킷1, 패킷2, 패킷3 순서로 송신
    2. 서버가 패킷1, 패킷3, 패킷2 순서로 수신
    3. 서버 -> 클라이언트 패킷2 부터 재전송 요청
- `UDP`
    - IP와 거의 동일
    - PORT만 추가(패킷 구분용으로 사용)
    - 체크섬 추가(데이터 확인용으로 사용)
    - 3way handshake가 없고 전송하는 데이터 크기가 작아서 최적화 가능
    - 애플리케이션에서 추가 작업 필요
    - http3 에서 최적화를 하면서 UDP 프로토콜을 사용함

# PORT
- 한번에 여러 애플리케이션을 사용하여 여러개의 서버와 통신할 경우를 위해 사용
- 패킷이 여러개 날아왔을때 어떤 어플리케이션을 위한 패킷인지 구분
- `같은 IP 내에서 프로세스 구분`
- 0 ~ 65535 할당 가능
- 0 ~ 1023: 잘 알려진 포트, 사용하지 않는 것이 좋음
    - FTP - 20, 21
    - TELNET - 23
    - HTTP - 80
    - HTTPS - 443
# DNS
- IP는 사람이 기억하기 어렵고 변경가능성이 존재함
- DNS 시스템을 도입함
    - 마치 전화번호부와 같은 역할
    - 도메인 명을 IP 주소로 변경
- DNS 동작
    1. DNS 서버에 도메인 명으로 IP요청
    2. IP 응답 받음
    3. 해당 IP로 연결